const Bangumi = new Map([[28636,{"season_id":28636,"title":"食戟之靈 神之皿","org_title":"食戟のソーマ 神ノ皿","eps":[286893,286894,286895,286896,286897]}],[28681,{"season_id":28681,"title":"我的英雄學院 第四季","org_title":"僕のヒーローアカデミア 第四期","eps":[286404,286405,286406,286407]}],[28679,{"season_id":28679,"title":"歌舞伎町夏洛克","org_title":"歌舞伎町シャーロック","eps":[286305,286306,286307,286308,286309]}],[28674,{"season_id":28674,"title":"刺客守則","org_title":"アサシンズプライド","eps":[286232,286233,286234,286235,286236]}],[28712,{"season_id":28712,"title":"我不是說了能力要平均值嗎？","org_title":"私、能力は平均値でって言ったよね！","eps":[286153,286154,286155,286156,286157]}],[28711,{"season_id":28711,"title":"募戀英雄","org_title":"スタンドマイヒーローズ PIECE OF TRUTH","eps":[286129,286130,286131,286132,286133]}],[28545,{"season_id":28545,"title":"戰×戀","org_title":"戦×恋","eps":[285866,285867,285868,285869,285870,285871]}],[28575,{"season_id":28575,"title":"碧藍幻想 第二季","org_title":"GRANBLUE FANTASY The Animation season2 TV","eps":[286514,286515,286516,286517,286518,286519]}],[28583,{"season_id":28583,"title":"一弦定音！第二季","org_title":"この音とまれ！2","eps":[286450,286451,286452,286453,286454]}],[28673,{"season_id":28673,"title":"碧藍航線","org_title":"AZUR LANE","eps":[285763,285764,285765,285766,285767,285768]}],[28699,{"season_id":28699,"title":"放學後桌遊俱樂部","org_title":"放課後さいころ倶楽部","eps":[285502,285503,285504,285505,285506,285507]}],[28669,{"season_id":28669,"title":"香蕉喵 不可思議的夥伴們","org_title":"ばなにゃ ふしぎななかまたち","eps":[285145,285146,285147,285148,285149,285150]}],[28664,{"season_id":28664,"title":"銀河英雄傳說：全新命題  星亂","org_title":"銀河英雄伝説 Die Neue These 星乱","eps":[285066,285067,285068,285069,285070,285071,285072]}],[28049,{"season_id":28049,"title":"平凡職業造就世界最強","org_title":"ありふれた職業で世界最強","eps":[276323,276324,276325,276326,276327,276328,276329,276330,276331,276332,276333,276334,276335,283824]}],[28059,{"season_id":28059,"title":"炎炎消防隊","org_title":"炎炎ノ消防隊","eps":[276503,276504,276505,276506,276507,276508,276509,276510,276511,276512,276513,276514,276515,276516,276517,276518]}],[28065,{"season_id":28065,"title":"Ｄｒ．ＳＴＯＮＥ（新石紀）","org_title":"Dr.STONE","eps":[276801,276802,276803,276804,276805,276806,276807,276808,276809,276810,276811,276812,276813,276814,276815,276816,276817,276818,276819]}],[28050,{"season_id":28050,"title":"魔王大人、RETRY！","org_title":"魔王様、リトライ！","eps":[276348,276349,276350,276351,276352,276353,276354,276355,276356,276357,276358,276359]}],[28017,{"season_id":28017,"title":"彼方的阿斯特拉","org_title":"彼方のアストラ","eps":[276761,276762,276763,276764,276765,276766,276767,276768,276769,276770,276771,276772]}],[28063,{"season_id":28063,"title":"流汗吧！健身少女","org_title":"ダンベル何キロ持てる？","eps":[276727,276728,276729,276730,276731,276732,276733,276734,276735,276736,276737,276738]}],[28012,{"season_id":28012,"title":"你遭難了嗎？","org_title":"ソウナンですか？","eps":[276588,276589,276590,276591,276592,276593,276594,276595,276596,276597,276598,276599]}],[28019,{"season_id":28019,"title":"魔術學姐","org_title":"手品先輩","eps":[276601,276602,276603,276604,276605,276606,276607,276608,276609,276610,276611,276612]}],[26962,{"season_id":26962,"title":"八月的棒球甜心","org_title":"八月のシンデレラナイン","eps":[268164,268165,268166,268167,268168,268169,268170,268171,268172,268173,268174,268175]}],[26959,{"season_id":26959,"title":"一弦定音！","org_title":"この音とまれ！","eps":[268048,268049,268050,268051,268052,268053,268054,268055,268056,268057,268058,268059,275714]}],[27728,{"season_id":27728,"title":"YU-NO 在這世界盡頭詠唱愛的少女","org_title":"この世の果てで恋を唄う少女YU-NO","eps":[270945,270946,270947,270948,270949,270950,270951,270952,270953,270954,270955,270956,270957,270958,270959,270960,270961,270962,270963,270964,270965,270966,270967,270968,270969,270970]}],[25836,{"season_id":25836,"title":"只要別西卜大小姐喜歡就好","org_title":"ベルゼブブ嬢のお気に召すまま。","eps":[251243,251244,251245,251246,251247,251248,251249,251250,251251,251252,251253,251254]}],[25959,{"season_id":25959,"title":"產子救世錄","org_title":"CONCEPTION","eps":[253946,253947,253948,253949,253950,253951,253952,253953,253954,253955,253956,253957]}],[25727,{"season_id":25727,"title":"Tokyo Guru: re (Part 2)","org_title":"東京喰種：re 第2期","eps":[251210,251211,251212,251213,251214,251215,251216,251217,251218,251219,251220,251221]}],[25689,{"season_id":25689,"title":"佐賀偶像是傳奇","org_title":"ゾンビランドサガ","eps":[251255,251256,251257,251258,251259,251260,251261,251262,251263,251264,251265,251266]}],[25687,{"season_id":25687,"title":"天空與海洋之間","org_title":"ソラとウミのアイダ","eps":[251231,251232,251233,251234,251235,251236,251237,251238,251239,251240,251241,251242]}],[25848,{"season_id":25848,"title":"蒼天之拳 REGENESIS 第二季","org_title":"蒼天の拳 REGENESIS（第2期）","eps":[251437,251438,251439,251440,251441,251442,251443,251444,251445,251446,251447,251448]}],[25605,{"season_id":25605,"title":"Double Decker! 道格&基里爾","org_title":"DOUBLE DECKER! ダグ＆キリル","eps":[251167,251168,251169,251170,251171,251172,251173,251174,251175,251176,251177,251178,251179,262371,264658,268835]}],[24593,{"season_id":24593,"title":"搖曳莊的幽奈小姐","org_title":"ゆらぎ荘の幽奈さん ","eps":[251823,251824,251825,251826,251827,251828,251829,251830,251831,251832,251833,251834]}],[26841,{"season_id":26841,"title":"少女☆歌劇 Revue Starlight","org_title":"少女☆歌劇 レヴュー・スタァライト","eps":[267649,269611,269612,269613,269614,269661,269666,269667,269668,269669,269670,269671]}],[24595,{"season_id":24595,"title":"Angolmois 元寇合戰記","org_title":"アンゴルモア 元寇合戦記","eps":[232210,232211,232212,232213,232214,232215,232216,232217,232218,232219,232220,232221]}],[27746,{"season_id":27746,"title":"百鍊霸王與聖約女武神","org_title":"百錬の覇王と聖約の戦乙女","eps":[272397,272398,272399,272400,272401,272402,272403,272404,272405,272406,272407,272408]}],[28321,{"season_id":28321,"title":"春原莊的管理員小姐","org_title":"すのはら荘の管理人さん","eps":[280803,280804,280805,280806,280807,280808,280809,280810,280811,280812,280813,280814]}],[24960,{"season_id":24960,"title":"千槍士","org_title":"せんじゅうし","eps":[232156,232157,232158,232159,232160,232161,232162,232163,232164,232165,232166,232167,250820,264466]}],[23860,{"season_id":23860,"title":"奴隸區 The Animation","org_title":"奴隷区 The Animation","eps":[200077,200078,200079,200080,200081,200082,200083,200084,200085,200086,200087,200088]}],[23819,{"season_id":23819,"title":"甜心戰士 Universe","org_title":"Cutie Honey Universe","eps":[200446,200447,200448,200449,200450,200451,200452,200453,200454,200455,200456,200457]}],[23820,{"season_id":23820,"title":"失憶融合WIXOSS","org_title":"Lostorage conflated WIXOSS","eps":[200307,200308,200309,200310,200311,200312,200313,200314,200315,200316,200317,200318]}],[23863,{"season_id":23863,"title":"Tokyo Guru: re (Part 1)","org_title":"トーキョーグール：re","eps":[199857,199858,199859,199860,199861,199862,199863,199864,199865,199866,199867,199868]}],[23870,{"season_id":23870,"title":"銀河英雄傳說：全新命題 邂逅","org_title":"銀河英雄伝説 Die Neue These 邂逅","eps":[199973,199974,199975,199976,199977,199978,199979,199980,199981,199982,199983,199984,206637]}],[23868,{"season_id":23868,"title":"蒼天之拳 REGENESIS","org_title":"蒼天の拳 REGENESIS","eps":[199771,199772,199773,199774,199775,199776,199777,199778,199779,199780,199781,199782]}],[21680,{"season_id":21680,"title":"DARLING in the FRANXX","org_title":"ダーリン・イン・ザ・フランキス","eps":[183799,183800,183801,183802,183803,183804,183805,183806,183807,183808,183809,183810,183811,183812,183813,183814,183815,183816,183817,183818,183819,183820,183821,183822,216075,216076]}],[21754,{"season_id":21754,"title":"續 刀劍亂舞 -花丸-","org_title":"続 刀剣乱舞-花丸-","eps":[173155,173156,173157,173158,173159,173160,173161,173162,173163,173164,173165,173166]}],[22844,{"season_id":22844,"title":"Slow Start","org_title":"スロウスタート","eps":[173366,173367,173368,173369,173370,173371,173372,173373,173374,173375,173376,173377]}],[6502,{"season_id":6502,"title":"干物妹!小埋R / 我家有個魚乾妹R","org_title":"干物妹！うまるちゃんR","eps":[115628,115629,115630,115631,115632,115633,115634,115635,115636,115637,115638,115639]}],[6430,{"season_id":6430,"title":"Dies irae 神怒之日","org_title":"Dies irae","eps":[115202,115203,115204,115205,115206,115207,115208,115209,115210,115211,115212,115213,214557,216149,216150,216151,216152,216153,216154]}],[6496,{"season_id":6496,"title":"Infini-T Force","org_title":"Infini-T Force","eps":[115475,115476,115477,115478,115479,115480,115481,115482,115483,115484,115485,115486]}],[6302,{"season_id":6302,"title":"活撃/刀剣乱舞","org_title":"活撃 刀剣乱舞","eps":[113106,113107,113108,113109,113110,113111,113112,113113,113114,113115,113116,113117,114740]}],[28137,{"season_id":28137,"title":"为美好的世界献上祝福！ 第二季 ","org_title":"この素晴らしい世界に祝福を！2","eps":[278499,278500,278501,278502,278503,278504,278505,278506,278507,278508]}],[28155,{"season_id":28155,"title":"情熱傳說 the X 第二季","org_title":"テイルズ オブ ゼスティリア ザ クロス","eps":[278610,278611,278612,278613,278614,278615,278616,278617,278618,278619,278620,278621,278622]}],[5782,{"season_id":5782,"title":"幼女戰記","org_title":"幼女戦記","eps":[278553,278554,278555,278556,278557,278558,278559,278560,278561,278562,278563,278564]}],[26170,{"season_id":26170,"title":"昭和元祿落語心中-助六再臨篇","org_title":"昭和元禄落語心中 -助六再び篇-","eps":[257383,257384,257385,257386,257387,257388,257389,257390,257391,257392,257393,257394]}],[5775,{"season_id":5775,"title":"政宗君的复仇","org_title":"政宗くんのリベンジ","eps":[275816,275817,275818,275819,275820,275821,275822,275823,275824,275825,275826,275827]}],[28115,{"season_id":28115,"title":"排球少年 烏野高校 VS 白鳥澤學園高校  ","org_title":"ハイキュー!! 烏野高校 VS 白鳥沢学園高校","eps":[277938,277939,277940,277941,277942,277943,277944,277945,277946,277947]}],[26019,{"season_id":26019,"title":"漂流武士 ","org_title":"ドリフターズ","eps":[255732,255733,255734,255735,255736,255737,255738,255739,255740,255741,255742,255743]}],[28061,{"season_id":28061,"title":"竞女","org_title":"競女!!!!!!!!","eps":[276712,276713,276714,276715,276716,276717,276718,276719,276720,276721,276722,276723]}],[28055,{"season_id":28055,"title":"FLIP FLAPPERS","org_title":"フリップフラッパーズ","eps":[276459,276460,276461,276462,276463,276464,276465,276466,276467,276468,276469,276470,276471]}],[5052,{"season_id":5052,"title":"心靈代碼 QUALIDEA CODE","org_title":"クオリディア・コード","eps":[93095,93096,93097,93098,93099,93100,93101,93102,93103,93104,93105,93106]}],[28649,{"season_id":28649,"title":"Active Raid -機動強襲室第八課- 2nd","org_title":"アクティヴレイド -機動強襲室第八係- 2nd","eps":[286855,286856,286857,286858,286859,286860,286861,286862,286863,286864,286865,286866]}],[28033,{"season_id":28033,"title":"91Days","org_title":"ナインティワンデイズ","eps":[288501,288502,288503,288504,288505,288506,288507,288508,288509,288510,288511,288512,288519]}],[5019,{"season_id":5019,"title":"B-PROJECT","org_title":"B-PROJECT～鼓動＊アンビシャス～","eps":[92673,92674,92675,92676,92677,92678,92679,92680,92681,92682,92683,92684,92685]}],[28077,{"season_id":28077,"title":"遊戲王：次元的黑暗面","org_title":"遊☆戯☆王 THE DARK SIDE OF DIMENSIONS","eps":[277178]}],[28032,{"season_id":28032,"title":"田中君總是如此慵懶 ","org_title":"田中くんはいつもけだるげ","eps":[276003,276004,276005,276006,276007,276008,276009,276010,276011,276012,276013,276014]}],[28199,{"season_id":28199,"title":"JOJO的奇妙冒險 不滅鉆石","org_title":"ジョジョの奇妙な冒険 ダイヤモンドは砕けない","eps":[281301,281302,281303,281304,281305,281306,281307,281308,281309,281310,281311,281312,281313,281314,281315,281316,281317,281318,281319,281320,281321,281322,281323,281324,281325,281326,281327,281328,281329,281330,281331,281332,281333,281334,281335,281336,281337,281338,281339]}],[2701,{"season_id":2701,"title":"昭和元祿落語心中","org_title":"昭和元禄落語心中","eps":[256595,256596,256597,256598,256599,256600,256601,256602,256603,256604,256605,256606,256607]}],[3117,{"season_id":3117,"title":"告訴我！辣妹子醬","org_title":"おしえて！ ギャル子ちゃん","eps":[276747,276748,276749,276750,276751,276752,276753,276754,276755,276756,276757,276758]}],[28648,{"season_id":28648,"title":"Active Raid -機動強襲室第八課-","org_title":"アクティヴレイド -機動強襲室第八係-","eps":[284780,284781,284782,284783,284784,284785,284786,284787,284788,284789,284790,284791]}],[28737,{"season_id":28737,"title":"排球少年！！第二季","org_title":"ハイキュー！！セカンドシーズン","eps":[287034,287035,287036,287037,287038,287039,287040,287041,287042,287043,287044,287045,287046,287047,287048,287049,287050,287051,287052,287053,287054,287055,287056,287057,287058]}],[2628,{"season_id":2628,"title":"純情羅曼史 第3季","org_title":"","eps":[63957,64230,64325,64324,64619,65062,66277,66276,68499,69014,69291,70000]}],[28182,{"season_id":28182,"title":"OVERLORD","org_title":"オーバーロード","eps":[280748,280749,280750,280751,280752,280753,280754,280755,280756,280757,280758,280759,280760]}],[2586,{"season_id":2586,"title":"沒有黃段子的無聊世界","org_title":"下ネタという概念が存在しない退屈な世界","eps":[63842,63924,63994,64174,64283,64555,65066,65871,66714,67419,68535,69168]}],[6361,{"season_id":6361,"title":"棺姬嘉依卡 AVENGING BATTLE","org_title":"棺姫のチャイカ AVENGING BATTLE","eps":[113170,113171,113172,113173,113174,113175,113176,113177,113178,113179]}],[28150,{"season_id":28150,"title":"頭文字D Legend1 -覺醒-","org_title":"新劇場版 頭文字D Legend1 -覚醒-","eps":[278572]}],[26473,{"season_id":26473,"title":"東京ESP ","org_title":"東京ESP","eps":[261491,261492,261493,261494,261495,261496,261497,261498,261499,261500,261501,261502]}],[26468,{"season_id":26468,"title":"LOVE STAGE!!","org_title":"LOVE STAGE!!","eps":[261446,261447,261448,261449,261450,261451,261452,261453,261454,261455]}],[28187,{"season_id":28187,"title":"前進吧！登山少女  第二季","org_title":"ヤマノススメ セカンドシーズン","eps":[280724,280725,280726,280727,280728,280729,280730,280731,280732,280733,280734,280735,280736,280737,280738,280739,280740,280741,280742,280743,280744,280745,280746,280747]}],[28180,{"season_id":28180,"title":"月刊少女野崎君","org_title":"月刊少女野崎くん","eps":[279682,279683,279684,279685,279686,279687,279688,279689,279690,279691,279692,279693]}],[197,{"season_id":197,"title":"目隱都市的演繹者","org_title":"メカクシティアクターズ","eps":[4499,4498,4497,4496,4495,4494,4493,4492,4491,4490,4489,4488]}],[4187,{"season_id":4187,"title":"約會大作戰 第二季 ","org_title":"デート・ア・ライブII,DATE・A・LIVE Ⅱ","eps":[103130,103131,103132,103133,103134,103135,103136,103137,103138,103139]}],[28181,{"season_id":28181,"title":"乒乓  ","org_title":"ピンポンTHE ANIMATION","eps":[280824,280825,280826,280827,280828,280829,280830,280831,280832,280833,280834]}],[6333,{"season_id":6333,"title":"棺姬嘉依卡","org_title":"棺姫のチャイカ","eps":[112965,112966,112967,112968,112969,112970,112971,112972,112973,112974,112975,112976]}],[189,{"season_id":189,"title":"風雲維新大將軍","org_title":"風雲維新ダイ☆ショーグン","eps":[4406,4405,4404,4403,4402,4401,4400,4399,4398,4397,4396,4395]}],[6243,{"season_id":6243,"title":"魔法科高校的劣等生","org_title":"魔法科高校の劣等生","eps":[108330,108331,108332,108333,108334,108335,108336,108337,108338,108339,108340,108341,108342,108343,108344,108345,108346,108347,108348,108349,108350,108351,108352,108353,108354,108355]}],[4347,{"season_id":4347,"title":"魔劍姬！通","org_title":"マケン姫っ!通","eps":[113200,113201,113202,113203,113204,113205,113206,113207,113208,113209]}],[6247,{"season_id":6247,"title":"我的腦內戀礙選項","org_title":"俺の脳内選択肢が、学園ラブコメを全力で邪魔している","eps":[108463,108464,108465,108466,108467,108468,108469,108470,108471,108472]}],[28076,{"season_id":28076,"title":"東京暗鴉","org_title":"東京レイヴンズ","eps":[277193,277194,277195,277196,277197,277198,277199,277200,277201,277202,277203,277204,277205,277206,277207,277208,277209,277210,277211,277212,277213,277214,277215,277216]}],[4382,{"season_id":4382,"title":"當不成勇者的我，只好認真找工作","org_title":"勇者になれなかった俺はしぶしぶ就職を決意しました。","eps":[88851,88852,88853,88854,88855,88856,88857,88858,88859,88860,88861,88862]}],[28136,{"season_id":28136,"title":"魔法少女☆伊莉雅","org_title":"Fate/kaleid liner プリズマ☆イリヤ","eps":[278429,278430,278431,278432,278433,278434,278435,278436,278437,278438]}],[28184,{"season_id":28184,"title":"前進吧！登山少女","org_title":"ヤマノススメ","eps":[279699,279700,279701,279702,279703,279704,279705,279706,279707,279708,279709,279710]}]]);

const season_url = "api.bilibili.com/pgc/view/app/season";
const episode_url = "api.bilibili.com/pgc/player/api/playurl";

const url = $request.url;

let ret = false;

const seasonMatch = function(season) {
  return Bangumi.has(season);
};

const epMatch = function(ep) {
  for (const [sid, bangumi] of Bangumi) {
    if (bangumi.eps.includes(ep)) {
      return true;
    }
  }
  return false;
};

if (url && typeof url === "string") {
  if (url.includes(season_url) || url.includes(episode_url)) {
    const season = /season_id=(.*?)&/.exec(url);
    if (season) {
      ret = seasonMatch(Number(season[1]));
    } else {
      const episode = /ep_id=(.*?)&/.exec(url);
      ret = epMatch(Number(episode[1]));
    }
  }
}

$done({ matched: ret });
